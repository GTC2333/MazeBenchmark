<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>MazeBench-2D Report</title>
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .card { border: 1px solid #ccc; padding: 12px; border-radius: 8px; }
    pre { background: #f7f7f7; padding: 8px; }
  </style>
</head>
<body>
  <h1>MazeBench-2D</h1>
  <h2>综合得分: %%TOTAL%% 分</h2>
  <div id="radar" class="card"></div>
  <script>
    var data = [{
      type: 'scatterpolar',
      r: [%%S%%, %%Q%%, %%O%%, %%R%%, %%A%%],
      theta: ['S','Q','O','R','A'],
      fill: 'toself'
    }];
    var layout = {polar: {radialaxis: {visible: true, range: [0,1]}}, showlegend: false};
    Plotly.newPlot('radar', data, layout);
  </script>

  <div class="grid">
    <div class="card">
      <h3>迷宫原图</h3>
      <img src="%%IMG_SRC%%" alt="maze" style="image-rendering: pixelated; border:1px solid #ccc" />
    </div>
    <div class="card">
      <h3>路径对比（原点左上，x 为列，y 为行）</h3>
      <div id="pathplot"></div>
      <script>
        var sp = %%SP%%;
        var mp = %%MP%%;
        function toXY(path){
          // 原点在左上角，x 为列索引 (c)，y 为行索引 (r)
          var xs = path.map(p=>p[1]);
          var ys = path.map(p=>p[0]);
          return [xs, ys];
        }
        var spxy = toXY(sp);
        var mpxy = toXY(mp);
        var dataPath = [
          {x: spxy[0], y: spxy[1], mode: 'lines+markers', name: 'Shortest', line: {color: '#1f77b4', width: 3}},
          {x: mpxy[0], y: mpxy[1], mode: 'lines+markers', name: 'Model', line: {color: '#ff7f0e', width: 3}}
        ];
        Plotly.newPlot('pathplot', dataPath, {xaxis:{title:'x (列)'}, yaxis:{title:'y (行)', autorange:'reversed'}, legend: {orientation: 'h'}});
      </script>
    </div>
  </div>

  <div class="card">
    <h3>典型失败案例</h3>
    <pre>%%FAIL%%</pre>
  </div>
</body>
</html>
